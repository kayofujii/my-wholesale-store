<div
  id="card-buy-popup"
  class="card-buy-popup color-{{ settings.popover_color_scheme }} hidden"
  role="dialog"
  aria-modal="false"
  aria-labelledby="card-buy-popup-title"
>
  <button
    class="button button-unstyled close-button card-buy-popup__close"
    type="button"
    data-card-buy-close
    aria-label="{{ 'accessibility.close_dialog' | t }}"
  >
    {{- 'icon-close.svg' | inline_asset_content -}}
  </button>

  <div class="card-buy-popup__content">
    <h2
      id="card-buy-popup-title"
      class="h4"
      data-card-buy-title
    ></h2>

    <form
      class="card-buy-popup__form"
      data-card-buy-form
    >
      <div
        class="card-buy-popup__options"
        data-card-buy-options
      ></div>

      <div class="card-buy-popup__field">
        <label for="card-buy-quantity">{{ 'accessibility.quantity' | t }}</label>
        <quantity-selector-component
          class="quantity-selector"
          data-variant-id=""
        >
          <button
            class="button quantity-minus button-unstyled"
            type="button"
            name="minus"
            on:click="/decreaseQuantity"
            ref="minusButton"
          >
            <span class="visually-hidden">{{ 'accessibility.decrease_quantity' | t }}</span>
            <span class="svg-wrapper icon-plus">
              {{- 'icon-minus.svg' | inline_asset_content -}}
            </span>
          </button>
          <input
            id="card-buy-quantity"
            name="quantity"
            type="number"
            min="1"
            step="1"
            value="1"
            data-cart-quantity="0"
            data-card-buy-quantity
            ref="quantityInput"
            on:blur="/setQuantity"
            on:focus="/selectInputValue"
            aria-label="{{ 'accessibility.quantity' | t }}"
          >
          <button
            class="button quantity-plus button-unstyled"
            type="button"
            name="plus"
            on:click="/increaseQuantity"
            ref="plusButton"
          >
            <span class="visually-hidden">{{ 'accessibility.increase_quantity' | t }}</span>
            <span class="svg-wrapper icon-plus">
              {{- 'icon-plus.svg' | inline_asset_content -}}
            </span>
          </button>
        </quantity-selector-component>
      </div>

      <p
        class="card-buy-popup__error hidden"
        data-card-buy-error
        role="alert"
      ></p>

      <button
        class="button"
        type="submit"
        data-card-buy-submit
      >
        {{ 'actions.add_to_cart' | t }}
      </button>
    </form>
  </div>
</div>

{% stylesheet %}
  .card-buy-popup {
    position: absolute;
    z-index: var(--layer-raised);
    width: min(30rem, calc(100vw - 2 * var(--padding-md)));
    border: var(--style-border-popover);
    border-radius: var(--style-border-radius-popover);
    box-shadow: 0 8px 24px rgb(0 0 0 / var(--opacity-20));
    background: var(--color-background);
    overflow: hidden;
  }

  .card-buy-popup__close {
    position: absolute;
    top: var(--padding-xs);
    right: var(--padding-xs);
  }

  .card-buy-popup__content {
    padding: var(--padding-xl);
    display: grid;
    gap: var(--gap-md);
    max-height: inherit;
    overflow-y: auto;
  }

  .card-buy-popup__form {
    display: grid;
    gap: var(--gap-md);
  }

  .card-buy-popup__options {
    display: grid;
    gap: var(--gap-sm);
  }

  .card-buy-popup__field {
    display: grid;
    gap: var(--gap-2xs);
  }

  .card-buy-popup__field select,
  .card-buy-popup__field input {
    min-height: var(--minimum-touch-target);
    padding-inline: var(--padding-sm);
    display: flex;
    position: relative;
    border: var(--style-border-width-inputs) solid var(--color-border);
    border-radius: var(--style-border-radius-inputs);
    align-items: center;
    margin-top: var(--margin-2xs);
    overflow: clip;
  }

  .card-buy-popup .quantity-selector {
    width: 100%;
    min-height: var(--minimum-touch-target);
  }

  .card-buy-popup__error {
    color: rgb(var(--color-error-rgb, 176 0 32));
    margin: 0;
  }
{% endstylesheet %}
